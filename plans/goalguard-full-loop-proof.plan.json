{"name":"goalguard-full-loop-proof","targetExtensionId":"khalidsaidi.cursor-goalguard","steps":[{"type":"assertExtensionInstalled","name":"goalguard-installed"},{"type":"activateExtension","name":"goalguard-activate"},{"type":"executeCommand","name":"enable-workspace","command":"goalguard.enableWorkspace"},{"type":"executeCommand","name":"run-start-supervisor","command":"goalguard.startSupervisor","timeoutMs":60000},{"type":"sendPromptAndAssertResponseContains","name":"intent-supervisor-role","prompt":"What is your role? Reply with exactly one word.","assertResponseContains":"Supervisor","openNewChat":false,"waitForResponseMs":90000,"responseFilePath":".ai/cursor-extension-tester/last-response.txt","postOpenDelayMs":800,"postFocusDelayMs":600,"waitForPromptInComposerMs":5000},{"type":"sendPromptAndAssertResponseContains","name":"intent-subagents-known","prompt":"Which subagents can you delegate to? Reply with their exact names only, comma-separated.","assertResponseContains":"goalguard-worker","openNewChat":true,"waitForResponseMs":90000,"responseFilePath":".ai/cursor-extension-tester/last-response.txt","postOpenDelayMs":800,"postFocusDelayMs":600,"waitForPromptInComposerMs":5000},{"type":"sendPromptAndAssertResponseContains","name":"intent-delegation-proof","prompt":"Delegate to goalguard-worker exactly once. Give it only this instruction: 'What is your role? Reply with exactly one word.' Then reply to me with only that one word (the Worker's answer), nothing else.","assertResponseContains":"Worker","openNewChat":true,"waitForResponseMs":120000,"responseFilePath":".ai/cursor-extension-tester/last-response.txt","postOpenDelayMs":800,"postFocusDelayMs":600,"waitForPromptInComposerMs":5000},{"type":"sendPromptAndAssertResponseContains","name":"full-loop-goal-worker-verifier","prompt":"GoalGuard loop once: 1) Set .ai/goal.md to: create .ai/scratch/proof.txt with one line 'Delegation worked'. 2) Delegate to goalguard-worker to create it. 3) Run goalguard-verifier. 4) Reply with: Verifier verdict (APPROVE/REQUEST_CHANGES/BLOCKED) then the first line of .ai/scratch/proof.txt.","assertResponseContains":"Delegation worked","openNewChat":true,"waitForResponseMs":180000,"responseFilePath":".ai/cursor-extension-tester/last-response.txt","postOpenDelayMs":800,"postFocusDelayMs":600,"waitForPromptInComposerMs":5000},{"type":"assertFileExists","name":"proof-file-created-by-worker","path":".ai/scratch/proof.txt"},{"type":"assertFileContains","name":"proof-file-content","path":".ai/scratch/proof.txt","contains":"Delegation worked"}]}
